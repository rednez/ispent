<ispent-loadable-widget
  *ngIf="!isSuccessLoaded; else contentState"
  [isLoading]="isLoading"
  [isError]="isError"
  [emptyText]="'Content is empty' | translate"
  [errorText]="'Failed data' | translate"
></ispent-loadable-widget>

<ng-template #contentState>
  <ng-container *ngIf="form">
    <button
      mat-flat-button
      color="primary"
      [disabled]="form.pristine || isSaving"
      (click)="onSaveForm()"
    >
      {{ 'Save' | translate }}
    </button>

    <ng-container
      *ngIf="currencies.controls.length; else emptyState"
      [formGroup]="form"
    >
      <ng-container formArrayName="currencies">
        <ispent-budget-currency
          *ngFor="let currency of currencies.controls; index as i; last as last"
          [formControlName]="i"
          [groupsList]="groupsList"
          [isLast]="last"
          (addCurrency)="onAddCurrency()"
          (removeCurrency)="onRemoveCurrency(i, $event)"
        ></ispent-budget-currency>
      </ng-container>
    </ng-container>

    <ng-template #emptyState>
      <div>
        <ispent-empty-state
          [msgText]="
            'There is no currencies. To add a currency click on ' | translate
          "
          [actionText]="'Add Currency' | translate"
          (actionClick)="onAddCurrency()"
        ></ispent-empty-state>
      </div>
    </ng-template>
  </ng-container>
</ng-template>
